{"ast":null,"code":"var _jsxFileName = \"/app/app/javascript/src/components/Clients/List/index.tsx\",\n    _this = this;\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nvar logger = require(\"js-logger\").get(\"@saeloun/miru-web:javascript:src:components:Clients:List:index.tsx\");\n\nimport React, { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { ToastContainer } from \"react-toastify\";\nimport { setAuthHeaders, registerIntercepts } from \"apis/axios\";\nimport clients from \"apis/clients\";\nimport AmountBoxContainer from \"common/AmountBox\";\nimport ChartBar from \"common/ChartBar\";\nimport Table from \"common/Table\";\nimport { cashFormatter } from \"helpers/cashFormater\";\nimport { currencySymbol } from \"helpers/currencySymbol\";\nimport Header from \"./Header\";\nimport { TOASTER_DURATION } from \"../../../constants/index\";\nimport { unmapClientList } from \"../../../mapper/client.mapper\";\nimport DeleteClient from \"../Modals/DeleteClient\";\nimport EditClient from \"../Modals/EditClient\";\nimport NewClient from \"../Modals/NewClient\";\n\nvar getTableData = function getTableData(clients) {\n  if (clients) {\n    return clients.map(function (client) {\n      var hours = (client.minutes / 60).toFixed(2);\n      return {\n        col1: /*#__PURE__*/React.createElement(\"div\", {\n          className: \"text-base text-miru-dark-purple-1000\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 25,\n            columnNumber: 15\n          }\n        }, client.name),\n        col2: /*#__PURE__*/React.createElement(\"div\", {\n          className: \"text-base text-miru-dark-purple-1000 text-right\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 26,\n            columnNumber: 15\n          }\n        }, client.email),\n        col3: /*#__PURE__*/React.createElement(\"div\", {\n          className: \"text-base text-miru-dark-purple-1000 text-right\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 27,\n            columnNumber: 15\n          }\n        }, hours),\n        rowId: client.id\n      };\n    });\n  }\n\n  return [{}];\n};\n\nvar Clients = function Clients(_ref) {\n  var isAdminUser = _ref.isAdminUser;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      showEditDialog = _useState2[0],\n      setShowEditDialog = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      showDeleteDialog = _useState4[0],\n      setShowDeleteDialog = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      newClient = _useState6[0],\n      setnewClient = _useState6[1];\n\n  var _useState7 = useState({}),\n      _useState8 = _slicedToArray(_useState7, 2),\n      clientToEdit = _useState8[0],\n      setedit = _useState8[1];\n\n  var _useState9 = useState({}),\n      _useState10 = _slicedToArray(_useState9, 2),\n      clientToDelete = _useState10[0],\n      setDelete = _useState10[1];\n\n  var _useState11 = useState(),\n      _useState12 = _slicedToArray(_useState11, 2),\n      clientData = _useState12[0],\n      setClientData = _useState12[1];\n\n  var _useState13 = useState(null),\n      _useState14 = _slicedToArray(_useState13, 2),\n      totalMinutes = _useState14[0],\n      setTotalMinutes = _useState14[1];\n\n  var _useState15 = useState(null),\n      _useState16 = _slicedToArray(_useState15, 2),\n      overdueOutstandingAmount = _useState16[0],\n      setOverDueOutstandingAmt = _useState16[1];\n\n  var navigate = useNavigate();\n\n  var handleEditClick = function handleEditClick(id) {\n    setShowEditDialog(true);\n    var editSelection = clientData.find(function (client) {\n      return client.id === id;\n    });\n    setedit(editSelection);\n  };\n\n  var handleDeleteClick = function handleDeleteClick(id) {\n    setShowDeleteDialog(true);\n    var editSelection = clientData.find(function (client) {\n      return client.id === id;\n    });\n    setDelete(editSelection);\n  };\n\n  var handleSelectChange = function handleSelectChange(event) {\n    clients.get(\"?time_frame=\".concat(event.target.value)).then(function (res) {\n      var sanitized = unmapClientList(res);\n      setClientData(sanitized.clientList);\n      setTotalMinutes(sanitized.totalMinutes);\n      setOverDueOutstandingAmt(sanitized.overdueOutstandingAmount);\n    });\n  };\n\n  var handleRowClick = function handleRowClick(id) {\n    navigate(\"\".concat(id));\n  };\n\n  useEffect(function () {\n    setAuthHeaders();\n    registerIntercepts();\n    clients.get(\"?time_frame=week\").then(function (res) {\n      var sanitized = unmapClientList(res);\n      setClientData(sanitized.clientList);\n      setTotalMinutes(sanitized.totalMinutes);\n      setOverDueOutstandingAmt(sanitized.overdueOutstandingAmount);\n    });\n  }, []);\n  var tableHeader = [{\n    Header: \"CLIENT\",\n    accessor: \"col1\",\n    // accessor is the \"key\" in the data\n    cssClass: \"\"\n  }, {\n    Header: \"EMAIL ID\",\n    accessor: \"col2\",\n    cssClass: \"text-right\"\n  }, {\n    Header: \"HOURS LOGGED\",\n    accessor: \"col3\",\n    cssClass: \"text-right\" // accessor is the \"key\" in the data\n\n  }];\n  var currencySymb = currencySymbol(overdueOutstandingAmount === null || overdueOutstandingAmount === void 0 ? void 0 : overdueOutstandingAmount.currency);\n  var amountBox = [{\n    title: \"OVERDUE\",\n    amount: currencySymb + cashFormatter(overdueOutstandingAmount === null || overdueOutstandingAmount === void 0 ? void 0 : overdueOutstandingAmount.overdue_amount)\n  }, {\n    title: \"OUTSTANDING\",\n    amount: currencySymb + cashFormatter(overdueOutstandingAmount === null || overdueOutstandingAmount === void 0 ? void 0 : overdueOutstandingAmount.outstanding_amount)\n  }];\n  var tableData = getTableData(clientData);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ToastContainer, {\n    autoClose: TOASTER_DURATION,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Header, {\n    isAdminUser: isAdminUser,\n    setnewClient: setnewClient,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }\n  }, isAdminUser && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bg-miru-gray-100 py-10 px-10\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex justify-end\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    onChange: handleSelectChange,\n    className: \"px-3 py-1.5 text-base font-normal bg-transparent bg-clip-padding bg-no-repeat border-none transition ease-in-out m-0 focus:outline-none text-miru-han-purple-1000\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    className: \"text-miru-dark-purple-600\",\n    value: \"week\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 15\n    }\n  }, \"THIS WEEK\"), /*#__PURE__*/React.createElement(\"option\", {\n    className: \"text-miru-dark-purple-600\",\n    value: \"month\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 15\n    }\n  }, \"This MONTH\"), /*#__PURE__*/React.createElement(\"option\", {\n    className: \"text-miru-dark-purple-600\",\n    value: \"year\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 15\n    }\n  }, \"THIS YEAR\"))), clientData && /*#__PURE__*/React.createElement(ChartBar, {\n    data: clientData,\n    totalMinutes: totalMinutes,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 26\n    }\n  }), /*#__PURE__*/React.createElement(AmountBoxContainer, {\n    amountBox: amountBox,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex flex-col\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"overflow-hidden\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 15\n    }\n  }, clientData && /*#__PURE__*/React.createElement(Table, {\n    handleEditClick: handleEditClick,\n    handleDeleteClick: handleDeleteClick,\n    hasRowIcons: isAdminUser,\n    tableHeader: tableHeader,\n    tableRowArray: tableData,\n    rowOnClick: isAdminUser ? handleRowClick : function () {} // eslint-disable-line\n    ,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 32\n    }\n  })))))), showEditDialog && /*#__PURE__*/React.createElement(EditClient, {\n    setShowEditDialog: setShowEditDialog,\n    client: clientToEdit,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 9\n    }\n  }), showDeleteDialog && /*#__PURE__*/React.createElement(DeleteClient, {\n    setShowDeleteDialog: setShowDeleteDialog,\n    client: clientToDelete,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 9\n    }\n  }), newClient && /*#__PURE__*/React.createElement(NewClient, {\n    setnewClient: setnewClient,\n    setClientData: setClientData,\n    clientData: clientData,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 9\n    }\n  }));\n};\n\nexport default Clients;","map":{"version":3,"sources":["/app/app/javascript/src/components/Clients/List/index.tsx"],"names":["React","useEffect","useState","useNavigate","ToastContainer","setAuthHeaders","registerIntercepts","clients","AmountBoxContainer","ChartBar","Table","cashFormatter","currencySymbol","Header","TOASTER_DURATION","unmapClientList","DeleteClient","EditClient","NewClient","getTableData","map","client","hours","minutes","toFixed","col1","name","col2","email","col3","rowId","id","Clients","isAdminUser","showEditDialog","setShowEditDialog","showDeleteDialog","setShowDeleteDialog","newClient","setnewClient","clientToEdit","setedit","clientToDelete","setDelete","clientData","setClientData","totalMinutes","setTotalMinutes","overdueOutstandingAmount","setOverDueOutstandingAmt","navigate","handleEditClick","editSelection","find","handleDeleteClick","handleSelectChange","event","get","target","value","then","res","sanitized","clientList","handleRowClick","tableHeader","accessor","cssClass","currencySymb","currency","amountBox","title","amount","overdue_amount","outstanding_amount","tableData"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { ToastContainer } from \"react-toastify\";\nimport { setAuthHeaders, registerIntercepts } from \"apis/axios\";\nimport clients from \"apis/clients\";\n\nimport AmountBoxContainer from \"common/AmountBox\";\nimport ChartBar from \"common/ChartBar\";\nimport Table from \"common/Table\";\nimport { cashFormatter } from \"helpers/cashFormater\";\nimport { currencySymbol } from \"helpers/currencySymbol\";\n\nimport Header from \"./Header\";\nimport { TOASTER_DURATION } from \"../../../constants/index\";\nimport { unmapClientList } from \"../../../mapper/client.mapper\";\nimport DeleteClient from \"../Modals/DeleteClient\";\nimport EditClient from \"../Modals/EditClient\";\nimport NewClient from \"../Modals/NewClient\";\n\nconst getTableData = (clients) => {\n  if (clients) {\n    return clients.map((client) => {\n      const hours = (client.minutes / 60).toFixed(2);\n      return {\n        col1: <div className=\"text-base text-miru-dark-purple-1000\">{client.name}</div>,\n        col2: <div className=\"text-base text-miru-dark-purple-1000 text-right\">{client.email}</div>,\n        col3: <div className=\"text-base text-miru-dark-purple-1000 text-right\">{hours}</div>,\n        rowId: client.id\n      };\n    });\n  }\n  return [{}];\n};\n\nconst Clients = ({ isAdminUser }) => {\n  const [showEditDialog, setShowEditDialog] = useState<boolean>(false);\n  const [showDeleteDialog, setShowDeleteDialog] = useState<boolean>(false);\n  const [newClient, setnewClient] = useState<boolean>(false);\n  const [clientToEdit, setedit] = useState({});\n  const [clientToDelete, setDelete] = useState({});\n  const [clientData, setClientData] = useState<any>();\n  const [totalMinutes, setTotalMinutes] = useState(null);\n  const [overdueOutstandingAmount, setOverDueOutstandingAmt] = useState<any>(null);\n  const navigate = useNavigate();\n\n  const handleEditClick = (id) => {\n    setShowEditDialog(true);\n    const editSelection = clientData.find(client => client.id === id);\n    setedit(editSelection);\n  };\n\n  const handleDeleteClick = (id) => {\n    setShowDeleteDialog(true);\n    const editSelection = clientData.find(client => client.id === id);\n    setDelete(editSelection);\n  };\n\n  const handleSelectChange = (event) => {\n    clients.get(`?time_frame=${event.target.value}`)\n      .then((res) => {\n        const sanitized = unmapClientList(res);\n        setClientData(sanitized.clientList);\n        setTotalMinutes(sanitized.totalMinutes);\n        setOverDueOutstandingAmt(sanitized.overdueOutstandingAmount);\n      });\n  };\n\n  const handleRowClick = (id) => {\n    navigate(`${id}`);\n  };\n\n  useEffect(() => {\n    setAuthHeaders();\n    registerIntercepts();\n    clients.get(\"?time_frame=week\")\n      .then((res) => {\n        const sanitized = unmapClientList(res);\n        setClientData(sanitized.clientList);\n        setTotalMinutes(sanitized.totalMinutes);\n        setOverDueOutstandingAmt(sanitized.overdueOutstandingAmount);\n      });\n  }, []);\n\n  const tableHeader = [\n    {\n      Header: \"CLIENT\",\n      accessor: \"col1\", // accessor is the \"key\" in the data\n      cssClass: \"\"\n    },\n    {\n      Header: \"EMAIL ID\",\n      accessor: \"col2\",\n      cssClass: \"text-right\"\n    },\n    {\n      Header: \"HOURS LOGGED\",\n      accessor: \"col3\",\n      cssClass: \"text-right\" // accessor is the \"key\" in the data\n    }\n  ];\n\n  const currencySymb = currencySymbol(overdueOutstandingAmount?.currency);\n\n  const amountBox = [{\n    title: \"OVERDUE\",\n    amount: currencySymb + cashFormatter(overdueOutstandingAmount?.overdue_amount)\n  },\n  {\n    title: \"OUTSTANDING\",\n    amount: currencySymb + cashFormatter(overdueOutstandingAmount?.outstanding_amount)\n  }];\n\n  const tableData = getTableData(clientData);\n\n  return (\n    <>\n      <ToastContainer autoClose={TOASTER_DURATION} />\n      <Header isAdminUser={isAdminUser} setnewClient={setnewClient} />\n      <div>\n        {isAdminUser && <div className=\"bg-miru-gray-100 py-10 px-10\">\n          <div className=\"flex justify-end\">\n            <select onChange={handleSelectChange} className=\"px-3\n                py-1.5\n                text-base\n                font-normal\n                bg-transparent bg-clip-padding bg-no-repeat\n                border-none\n                transition\n                ease-in-out\n                m-0\n                focus:outline-none\n                text-miru-han-purple-1000\">\n              <option className=\"text-miru-dark-purple-600\" value=\"week\">\n                THIS WEEK\n              </option>\n              <option className=\"text-miru-dark-purple-600\" value=\"month\">\n                This MONTH\n              </option>\n              <option className=\"text-miru-dark-purple-600\" value=\"year\">\n                THIS YEAR\n              </option>\n            </select>\n          </div>\n          {clientData && <ChartBar data={clientData} totalMinutes={totalMinutes} />}\n          <AmountBoxContainer amountBox={amountBox} />\n        </div>\n        }\n        <div className=\"flex flex-col\">\n          <div className=\"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8\">\n            <div className=\"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8\">\n              <div className=\"overflow-hidden\">\n                {clientData && <Table\n                  handleEditClick={handleEditClick}\n                  handleDeleteClick={handleDeleteClick}\n                  hasRowIcons={isAdminUser}\n                  tableHeader={tableHeader}\n                  tableRowArray={tableData}\n                  rowOnClick={isAdminUser ? handleRowClick : () => { }}// eslint-disable-line\n                />}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      {showEditDialog &&\n        <EditClient\n          setShowEditDialog={setShowEditDialog}\n          client={clientToEdit}\n        />\n      }\n      {showDeleteDialog && (\n        <DeleteClient\n          setShowDeleteDialog={setShowDeleteDialog}\n          client={clientToDelete}\n        />\n      )}\n      {newClient && (\n        <NewClient\n          setnewClient={setnewClient}\n          setClientData={setClientData}\n          clientData={clientData}\n        />\n      )}\n    </>\n  );\n};\n\nexport default Clients;\n"]},"metadata":{},"sourceType":"module"}