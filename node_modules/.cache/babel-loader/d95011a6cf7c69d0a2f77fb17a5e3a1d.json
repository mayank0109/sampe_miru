{"ast":null,"code":"var _jsxFileName = \"/Users/mayankkhanna/Documents/miru-web/app/javascript/src/components/Projects/Details/EditMembersList.tsx\",\n    _this = this;\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nvar logger = require(\"js-logger\").get(\"@saeloun/miru-web:javascript:src:components:Projects:Details:EditMembersList.tsx\");\n\nimport * as React from \"react\";\nimport companyUsersApi from \"apis/company-users\";\nimport projectMembersApi from \"apis/project-members\";\nimport Toastr from \"common/Toastr\";\nimport { X } from \"phosphor-react\";\nimport EditMembersListForm from \"./EditMembersListForm\";\n\nvar EditMembersList = function EditMembersList(_ref) {\n  var setShowAddMemberDialog = _ref.setShowAddMemberDialog,\n      addedMembers = _ref.addedMembers,\n      projectId = _ref.projectId,\n      handleAddProjectDetails = _ref.handleAddProjectDetails,\n      closeAddRemoveMembers = _ref.closeAddRemoveMembers;\n\n  var _React$useState = React.useState(addedMembers),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      existingMembers = _React$useState2[0],\n      setExistingMembers = _React$useState2[1];\n\n  var _React$useState3 = React.useState(addedMembers.map(function (v) {\n    return _objectSpread(_objectSpread({}, v), {}, {\n      isExisting: true\n    });\n  })),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      members = _React$useState4[0],\n      setMembers = _React$useState4[1];\n\n  var _React$useState5 = React.useState([]),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      allMemberList = _React$useState6[0],\n      setAllMemberList = _React$useState6[1];\n\n  var markAddedMembers = function markAddedMembers(allMembers) {\n    return allMembers.map(function (memberFromAllMembers) {\n      return members.some(function (member) {\n        return member.id === memberFromAllMembers.id;\n      }) ? _objectSpread(_objectSpread({}, memberFromAllMembers), {}, {\n        isAdded: true\n      }) : _objectSpread(_objectSpread({}, memberFromAllMembers), {}, {\n        isAdded: false\n      });\n    });\n  };\n\n  var fetchCurrentWorkspaceUsers = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var resp;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return companyUsersApi.get();\n\n            case 3:\n              resp = _context.sent;\n              setAllMemberList(markAddedMembers(resp.data.users));\n              _context.next = 9;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 7]]);\n    }));\n\n    return function fetchCurrentWorkspaceUsers() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  React.useEffect(function () {\n    fetchCurrentWorkspaceUsers();\n  }, []);\n  React.useEffect(function () {\n    setAllMemberList(markAddedMembers(allMemberList));\n  }, [members]);\n\n  var updateMemberState = function updateMemberState(idx, key, val) {\n    var modalMembers = _toConsumableArray(members);\n\n    var memberToEdit = _objectSpread({}, members[idx]);\n\n    memberToEdit[key] = val;\n    modalMembers[idx] = memberToEdit;\n    setMembers(modalMembers);\n  };\n\n  var handleSubmit = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e) {\n      var oldIds, currentIds, removedIds, alreadyAddedMembersMap, newlyAddedMembers, updatedMembers;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              e.preventDefault();\n              oldIds = existingMembers.map(function (member) {\n                return member.id;\n              });\n              currentIds = members.map(function (member) {\n                return member.id;\n              });\n              removedIds = oldIds.filter(function (id) {\n                return !currentIds.includes(id);\n              });\n              alreadyAddedMembersMap = {};\n              existingMembers.forEach(function (member) {\n                alreadyAddedMembersMap[member.id] = member.hourlyRate;\n              });\n              newlyAddedMembers = members.filter(function (member) {\n                return !alreadyAddedMembersMap[member.id];\n              });\n              updatedMembers = members.filter(function (member) {\n                return alreadyAddedMembersMap[member.id] && alreadyAddedMembersMap[member.id] != member.hourlyRate;\n              });\n\n              if (!(newlyAddedMembers.length > 0 || updatedMembers.length > 0 || removedIds.length > 0)) {\n                _context2.next = 20;\n                break;\n              }\n\n              _context2.prev = 9;\n              _context2.next = 12;\n              return projectMembersApi.update(projectId, {\n                members: {\n                  added_members: newlyAddedMembers,\n                  removed_member_ids: removedIds,\n                  updated_members: updatedMembers\n                }\n              });\n\n            case 12:\n              setExistingMembers(members);\n              handleAddProjectDetails();\n              closeAddRemoveMembers();\n              Toastr.success(\"Changes saved successfully\");\n              _context2.next = 20;\n              break;\n\n            case 18:\n              _context2.prev = 18;\n              _context2.t0 = _context2[\"catch\"](9);\n\n            case 20:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[9, 18]]);\n    }));\n\n    return function handleSubmit(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"overflow-auto fixed top-0 left-0 right-0 bottom-0 inset-0 z-10 flex items-start justify-center\",\n    style: {\n      backgroundColor: \"rgba(29, 26, 49, 0.6)\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"relative px-4 h-full w-full md:flex md:items-center md:justify-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"rounded-lg px-6 pb-6 bg-white shadow-xl transform transition-all sm:align-middle sm:max-w-md modal-width\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex justify-between items-center mt-6\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h6\", {\n    className: \"text-base font-extrabold\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }\n  }, \"Add New Client\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: function onClick() {\n      setShowAddMemberDialog(false);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(X, {\n    size: 16,\n    color: \"#CDD6DF\",\n    weight: \"bold\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(EditMembersListForm, {\n    members: members,\n    allMemberList: allMemberList,\n    updateMemberState: updateMemberState,\n    setMembers: setMembers,\n    handleSubmit: handleSubmit,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 11\n    }\n  }))));\n};\n\nexport default EditMembersList;","map":{"version":3,"sources":["/Users/mayankkhanna/Documents/miru-web/app/javascript/src/components/Projects/Details/EditMembersList.tsx"],"names":["React","companyUsersApi","projectMembersApi","Toastr","X","EditMembersListForm","EditMembersList","setShowAddMemberDialog","addedMembers","projectId","handleAddProjectDetails","closeAddRemoveMembers","useState","existingMembers","setExistingMembers","map","v","isExisting","members","setMembers","allMemberList","setAllMemberList","markAddedMembers","allMembers","memberFromAllMembers","some","member","id","isAdded","fetchCurrentWorkspaceUsers","get","resp","data","users","useEffect","updateMemberState","idx","key","val","modalMembers","memberToEdit","handleSubmit","e","preventDefault","oldIds","currentIds","removedIds","filter","includes","alreadyAddedMembersMap","forEach","hourlyRate","newlyAddedMembers","updatedMembers","length","update","added_members","removed_member_ids","updated_members","success","backgroundColor"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AAEA,OAAOC,eAAP,MAA4B,oBAA5B;AACA,OAAOC,iBAAP,MAA8B,sBAA9B;AACA,OAAOC,MAAP,MAAmB,eAAnB;AACA,SAASC,CAAT,QAAkB,gBAAlB;AAEA,OAAOC,mBAAP,MAAgC,uBAAhC;;AAUA,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,OAA2H;AAAA,MAAxHC,sBAAwH,QAAxHA,sBAAwH;AAAA,MAAhGC,YAAgG,QAAhGA,YAAgG;AAAA,MAAlFC,SAAkF,QAAlFA,SAAkF;AAAA,MAAvEC,uBAAuE,QAAvEA,uBAAuE;AAAA,MAA9CC,qBAA8C,QAA9CA,qBAA8C;;AACjJ,wBAA8CX,KAAK,CAACY,QAAN,CAAeJ,YAAf,CAA9C;AAAA;AAAA,MAAOK,eAAP;AAAA,MAAwBC,kBAAxB;;AACA,yBAA8Bd,KAAK,CAACY,QAAN,CAAeJ,YAAY,CAACO,GAAb,CAAiB,UAAAC,CAAC;AAAA,2CAAUA,CAAV;AAAaC,MAAAA,UAAU,EAAE;AAAzB;AAAA,GAAlB,CAAf,CAA9B;AAAA;AAAA,MAAOC,OAAP;AAAA,MAAgBC,UAAhB;;AACA,yBAA0CnB,KAAK,CAACY,QAAN,CAAe,EAAf,CAA1C;AAAA;AAAA,MAAOQ,aAAP;AAAA,MAAsBC,gBAAtB;;AAEA,MAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAAC,UAAU;AAAA,WAAIA,UAAU,CAACR,GAAX,CACrC,UAACS,oBAAD;AAAA,aAA0BN,OAAO,CAACO,IAAR,CAAa,UAACC,MAAD;AAAA,eAAYA,MAAM,CAACC,EAAP,KAAcH,oBAAoB,CAACG,EAA/C;AAAA,OAAb,oCAAuEH,oBAAvE;AAA6FI,QAAAA,OAAO,EAAE;AAAtG,2CAAoHJ,oBAApH;AAA0II,QAAAA,OAAO,EAAE;AAAnJ,QAA1B;AAAA,KADqC,CAAJ;AAAA,GAAnC;;AAGA,MAAMC,0BAA0B;AAAA,yEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEZ5B,eAAe,CAAC6B,GAAhB,EAFY;;AAAA;AAEzBC,cAAAA,IAFyB;AAG/BV,cAAAA,gBAAgB,CAACC,gBAAgB,CAACS,IAAI,CAACC,IAAL,CAAUC,KAAX,CAAjB,CAAhB;AAH+B;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAA1BJ,0BAA0B;AAAA;AAAA;AAAA,KAAhC;;AAUA7B,EAAAA,KAAK,CAACkC,SAAN,CAAgB,YAAM;AACpBL,IAAAA,0BAA0B;AAC3B,GAFD,EAEG,EAFH;AAIA7B,EAAAA,KAAK,CAACkC,SAAN,CAAgB,YAAM;AACpBb,IAAAA,gBAAgB,CAACC,gBAAgB,CAACF,aAAD,CAAjB,CAAhB;AACD,GAFD,EAEG,CAACF,OAAD,CAFH;;AAIA,MAAMiB,iBAAiB,GAAG,SAApBA,iBAAoB,CAACC,GAAD,EAAMC,GAAN,EAAWC,GAAX,EAAmB;AAC3C,QAAMC,YAAY,sBAAOrB,OAAP,CAAlB;;AACA,QAAMsB,YAAY,qBAAQtB,OAAO,CAACkB,GAAD,CAAf,CAAlB;;AACAI,IAAAA,YAAY,CAACH,GAAD,CAAZ,GAAoBC,GAApB;AACAC,IAAAA,YAAY,CAACH,GAAD,CAAZ,GAAoBI,YAApB;AACArB,IAAAA,UAAU,CAACoB,YAAD,CAAV;AACD,GAND;;AAQA,MAAME,YAAY;AAAA,yEAAG,kBAAMC,CAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AACnBA,cAAAA,CAAC,CAACC,cAAF;AACMC,cAAAA,MAFa,GAEJ/B,eAAe,CAACE,GAAhB,CAAoB,UAAAW,MAAM;AAAA,uBAAIA,MAAM,CAACC,EAAX;AAAA,eAA1B,CAFI;AAGbkB,cAAAA,UAHa,GAGA3B,OAAO,CAACH,GAAR,CAAY,UAAAW,MAAM;AAAA,uBAAIA,MAAM,CAACC,EAAX;AAAA,eAAlB,CAHA;AAIbmB,cAAAA,UAJa,GAIAF,MAAM,CAACG,MAAP,CAAc,UAAApB,EAAE;AAAA,uBAAI,CAACkB,UAAU,CAACG,QAAX,CAAoBrB,EAApB,CAAL;AAAA,eAAhB,CAJA;AAKbsB,cAAAA,sBALa,GAKY,EALZ;AAMnBpC,cAAAA,eAAe,CAACqC,OAAhB,CAAwB,UAACxB,MAAD,EAAY;AAAEuB,gBAAAA,sBAAsB,CAACvB,MAAM,CAACC,EAAR,CAAtB,GAAoCD,MAAM,CAACyB,UAA3C;AAAwD,eAA9F;AACMC,cAAAA,iBAPa,GAOOlC,OAAO,CAAC6B,MAAR,CAAe,UAACrB,MAAD;AAAA,uBAAY,CAACuB,sBAAsB,CAACvB,MAAM,CAACC,EAAR,CAAnC;AAAA,eAAf,CAPP;AAQb0B,cAAAA,cARa,GAQInC,OAAO,CAAC6B,MAAR,CAAe,UAACrB,MAAD;AAAA,uBAAYuB,sBAAsB,CAACvB,MAAM,CAACC,EAAR,CAAtB,IAAqCsB,sBAAsB,CAACvB,MAAM,CAACC,EAAR,CAAtB,IAAqCD,MAAM,CAACyB,UAA7F;AAAA,eAAf,CARJ;;AAAA,oBASfC,iBAAiB,CAACE,MAAlB,GAA2B,CAA3B,IAAgCD,cAAc,CAACC,MAAf,GAAwB,CAAxD,IAA6DR,UAAU,CAACQ,MAAX,GAAoB,CATlE;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,qBAWTpD,iBAAiB,CAACqD,MAAlB,CAAyB9C,SAAzB,EAAoC;AACxCS,gBAAAA,OAAO,EAAE;AACPsC,kBAAAA,aAAa,EAAEJ,iBADR;AAEPK,kBAAAA,kBAAkB,EAAEX,UAFb;AAGPY,kBAAAA,eAAe,EAAEL;AAHV;AAD+B,eAApC,CAXS;;AAAA;AAkBfvC,cAAAA,kBAAkB,CAACI,OAAD,CAAlB;AACAR,cAAAA,uBAAuB;AACvBC,cAAAA,qBAAqB;AACrBR,cAAAA,MAAM,CAACwD,OAAP,CAAe,4BAAf;AArBe;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAZlB,YAAY;AAAA;AAAA;AAAA,KAAlB;;AA6BA,sBACE;AACE,IAAA,SAAS,EAAC,gGADZ;AAEE,IAAA,KAAK,EAAE;AACLmB,MAAAA,eAAe,EAAE;AADZ,KAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAME;AAAK,IAAA,SAAS,EAAC,uEAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,0GAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,wCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAI,IAAA,SAAS,EAAC,0BAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAEE;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAsB,IAAA,OAAO,EAAE,mBAAM;AAAErD,MAAAA,sBAAsB,CAAC,KAAD,CAAtB;AAAgC,KAAvE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,CAAD;AAAG,IAAA,IAAI,EAAE,EAAT;AAAa,IAAA,KAAK,EAAC,SAAnB;AAA6B,IAAA,MAAM,EAAC,MAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAFF,CADF,eAOE,oBAAC,mBAAD;AACE,IAAA,OAAO,EAAEW,OADX;AAEE,IAAA,aAAa,EAAEE,aAFjB;AAGE,IAAA,iBAAiB,EAAEe,iBAHrB;AAIE,IAAA,UAAU,EAAEhB,UAJd;AAKE,IAAA,YAAY,EAAEsB,YALhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAPF,CADF,CANF,CADF;AAyBD,CAxFD;;AA0FA,eAAenC,eAAf","sourcesContent":["import * as React from \"react\";\n\nimport companyUsersApi from \"apis/company-users\";\nimport projectMembersApi from \"apis/project-members\";\nimport Toastr from \"common/Toastr\";\nimport { X } from \"phosphor-react\";\n\nimport EditMembersListForm from \"./EditMembersListForm\";\n\nexport interface IEditMembersList {\n  setShowAddMemberDialog: any;\n  addedMembers: any;\n  projectId: number;\n  handleAddProjectDetails: any;\n  closeAddRemoveMembers: any;\n}\n\nconst EditMembersList = ({ setShowAddMemberDialog, addedMembers, projectId, handleAddProjectDetails, closeAddRemoveMembers }: IEditMembersList) => {\n  const [existingMembers, setExistingMembers] = React.useState(addedMembers);\n  const [members, setMembers] = React.useState(addedMembers.map(v => ({ ...v, isExisting: true })));\n  const [allMemberList, setAllMemberList] = React.useState([]);\n\n  const markAddedMembers = allMembers => allMembers.map(\n    (memberFromAllMembers) => members.some((member) => member.id === memberFromAllMembers.id) ? { ...memberFromAllMembers, isAdded: true } : { ...memberFromAllMembers, isAdded: false });\n\n  const fetchCurrentWorkspaceUsers = async () => {\n    try {\n      const resp = await companyUsersApi.get();\n      setAllMemberList(markAddedMembers(resp.data.users));\n    } catch (error) {\n      // Add error handling\n    }\n\n  };\n\n  React.useEffect(() => {\n    fetchCurrentWorkspaceUsers();\n  }, []);\n\n  React.useEffect(() => {\n    setAllMemberList(markAddedMembers(allMemberList));\n  }, [members]);\n\n  const updateMemberState = (idx, key, val) => {\n    const modalMembers = [...members];\n    const memberToEdit = { ...members[idx] };\n    memberToEdit[key] = val;\n    modalMembers[idx] = memberToEdit;\n    setMembers(modalMembers);\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const oldIds = existingMembers.map(member => member.id);\n    const currentIds = members.map(member => member.id);\n    const removedIds = oldIds.filter(id => !currentIds.includes(id));\n    const alreadyAddedMembersMap = {};\n    existingMembers.forEach((member) => { alreadyAddedMembersMap[member.id] = member.hourlyRate; });\n    const newlyAddedMembers = members.filter((member) => !alreadyAddedMembersMap[member.id]);\n    const updatedMembers = members.filter((member) => alreadyAddedMembersMap[member.id] && alreadyAddedMembersMap[member.id] != member.hourlyRate);\n    if (newlyAddedMembers.length > 0 || updatedMembers.length > 0 || removedIds.length > 0) {\n      try {\n        await projectMembersApi.update(projectId, {\n          members: {\n            added_members: newlyAddedMembers,\n            removed_member_ids: removedIds,\n            updated_members: updatedMembers\n          }\n        });\n        setExistingMembers(members);\n        handleAddProjectDetails();\n        closeAddRemoveMembers();\n        Toastr.success(\"Changes saved successfully\");\n      }\n      catch (err) {\n        // add error handling\n      }\n    }\n  };\n\n  return (\n    <div\n      className=\"overflow-auto fixed top-0 left-0 right-0 bottom-0 inset-0 z-10 flex items-start justify-center\"\n      style={{\n        backgroundColor: \"rgba(29, 26, 49, 0.6)\"\n      }}\n    >\n      <div className=\"relative px-4 h-full w-full md:flex md:items-center md:justify-center\">\n        <div className=\"rounded-lg px-6 pb-6 bg-white shadow-xl transform transition-all sm:align-middle sm:max-w-md modal-width\">\n          <div className=\"flex justify-between items-center mt-6\">\n            <h6 className=\"text-base font-extrabold\">Add New Client</h6>\n            <button type=\"button\" onClick={() => { setShowAddMemberDialog(false); }}>\n              <X size={16} color=\"#CDD6DF\" weight=\"bold\" />\n            </button>\n          </div>\n          <EditMembersListForm\n            members={members}\n            allMemberList={allMemberList}\n            updateMemberState={updateMemberState}\n            setMembers={setMembers}\n            handleSubmit={handleSubmit} />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default EditMembersList;\n"]},"metadata":{},"sourceType":"module"}