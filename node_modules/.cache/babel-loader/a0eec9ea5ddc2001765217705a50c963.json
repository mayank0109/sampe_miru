{"ast":null,"code":"var _jsxFileName = \"/Users/mayankkhanna/Documents/miru-web/app/javascript/src/components/Invoices/Edit/InvoiceTotal.tsx\",\n    _this = this;\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nvar logger = require(\"js-logger\").get(\"@saeloun/miru-web:javascript:src:components:Invoices:Edit:InvoiceTotal.tsx\");\n\nimport React, { useState, useEffect } from \"react\";\nimport { currencyFormat } from \"helpers/currency\";\nimport { PencilSimple, DotsThreeVertical } from \"phosphor-react\";\nimport DiscountMenu from \"../Generate/DiscountMenu\"; // TODO: Make invoice total as common component and move logic to main container\n\nvar InvoiceTotal = function InvoiceTotal(_ref) {\n  var currency = _ref.currency,\n      newLineItems = _ref.newLineItems,\n      invoiceLineItems = _ref.invoiceLineItems,\n      invoiceAmount = _ref.invoiceAmount,\n      amountPaid = _ref.amountPaid,\n      amountDue = _ref.amountDue,\n      setAmountDue = _ref.setAmountDue,\n      setAmount = _ref.setAmount,\n      discount = _ref.discount,\n      setDiscount = _ref.setDiscount,\n      tax = _ref.tax,\n      setTax = _ref.setTax,\n      showDiscountInput = _ref.showDiscountInput,\n      showTax = _ref.showTax;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      addDiscount = _useState2[0],\n      setAddDiscount = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      showDiscountMenu = _useState4[0],\n      setShowDiscountMenu = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      showDiscountButton = _useState6[0],\n      setShowDiscountButton = _useState6[1];\n\n  var _useState7 = useState(showDiscountInput),\n      _useState8 = _slicedToArray(_useState7, 2),\n      showDiscount = _useState8[0],\n      setShowDiscount = _useState8[1];\n\n  var _useState9 = useState(showTax),\n      _useState10 = _slicedToArray(_useState9, 2),\n      showTaxInput = _useState10[0],\n      setShowTaxInput = _useState10[1];\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      showEditTaxButton = _useState12[0],\n      setShowEditTaxButton = _useState12[1];\n\n  var _useState13 = useState(0),\n      _useState14 = _slicedToArray(_useState13, 2),\n      subTotal = _useState14[0],\n      setSubTotal = _useState14[1];\n\n  var _useState15 = useState(0),\n      _useState16 = _slicedToArray(_useState15, 2),\n      total = _useState16[0],\n      setTotal = _useState16[1];\n\n  var onEnter = function onEnter(e, type) {\n    if (e.key === \"Enter\") {\n      if (type === \"Discount\") {\n        setAddDiscount(false);\n        setShowDiscount(true);\n      } else {\n        setShowTaxInput(false);\n      }\n    }\n  };\n\n  var getDiscount = function getDiscount() {\n    if (showDiscount && discount) {\n      return /*#__PURE__*/React.createElement(\"td\", {\n        className: \"font-bold text-base text-miru-dark-purple-1000 text-right \",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 9\n        }\n      }, discount);\n    } else if (addDiscount) {\n      return /*#__PURE__*/React.createElement(\"td\", {\n        className: \"text-right pb-1\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        value: discount,\n        className: \"p-1 pr-2 font-medium text-sm text-miru-dark-purple-1000 text-right w-20 rounded focus:outline-none focus:border-miru-gray-1000 focus:ring-1 focus:ring-miru-gray-1000\",\n        onChange: function onChange(e) {\n          return setDiscount(e.target.value);\n        },\n        onKeyDown: function onKeyDown(e) {\n          return onEnter(e, \"Discount\");\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 11\n        }\n      }));\n    } else return null;\n  };\n\n  var getTax = function getTax() {\n    if (showTaxInput) {\n      return /*#__PURE__*/React.createElement(\"td\", {\n        className: \"pt-4 font-bold text-base text-miru-dark-purple-1000 text-right w-22\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        value: tax,\n        className: \"p-1 pr-2 font-medium text-sm text-miru-dark-purple-1000 text-right w-20 rounded focus:outline-none focus:border-miru-gray-1000 focus:ring-1 focus:ring-miru-gray-1000\",\n        onChange: function onChange(e) {\n          return setTax(e.target.value);\n        },\n        onKeyDown: function onKeyDown(e) {\n          return onEnter(e, \"Tax\");\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }\n      }));\n    }\n\n    return /*#__PURE__*/React.createElement(\"td\", {\n      className: \"pt-4 font-bold text-base text-miru-dark-purple-1000 text-right w-22\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 7\n      }\n    }, currencyFormat({\n      baseCurrency: currency,\n      amount: tax\n    }));\n  };\n\n  useEffect(function () {\n    var newLineItemsSubTotal = newLineItems.reduce(function (sum, _ref2) {\n      var lineTotal = _ref2.lineTotal;\n      return sum + lineTotal;\n    }, 0);\n    var invoiceItemSubTotal = invoiceLineItems.reduce(function (sum, _ref3) {\n      var quantity = _ref3.quantity,\n          rate = _ref3.rate;\n      return sum + quantity / 60 * rate;\n    }, 0);\n    var newTotal = Number(newLineItemsSubTotal) + Number(invoiceAmount) + Number(tax) - Number(discount);\n    setSubTotal(newLineItemsSubTotal + invoiceItemSubTotal);\n    setTotal(newTotal);\n    setAmount(newTotal);\n    setAmountDue(newTotal - amountPaid);\n  }, [newLineItems, discount, subTotal, tax]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pt-3 pb-10 mb-5 w-full flex justify-end\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    className: \"w-1/3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    className: \"font-normal text-base text-miru-dark-purple-1000 text-right pr-10\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }\n  }, \"Sub total\"), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"font-bold text-base text-miru-dark-purple-1000 text-right \",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }\n  }, subTotal)), /*#__PURE__*/React.createElement(\"tr\", {\n    onMouseOver: function onMouseOver() {\n      return setShowDiscountButton(true);\n    },\n    onMouseLeave: function onMouseLeave() {\n      return setShowDiscountButton(false);\n    },\n    className: \"pb-5 border-b-2 miru-gray-400 \",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 11\n    }\n  }, showDiscount && discount ? /*#__PURE__*/React.createElement(\"td\", {\n    className: \"py-2 pr-10 font-normal text-base text-miru-dark-purple-1000 text-right pr-10\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 17\n    }\n  }, \"Discount\") : /*#__PURE__*/React.createElement(\"td\", {\n    className: \"pt-2 pr-10 pb-3 font-bold text-xs text-miru-han-purple-1000 text-right tracking-widest cursor-pointer\",\n    onClick: function onClick() {\n      return setAddDiscount(true);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 17\n    }\n  }, \"ADD DISCOUNT\"), getDiscount()), /*#__PURE__*/React.createElement(\"tr\", {\n    onMouseOver: function onMouseOver() {\n      return setShowEditTaxButton(true);\n    },\n    onMouseLeave: function onMouseLeave() {\n      return setShowEditTaxButton(false);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    className: \"pt-4 font-normal text-base text-miru-dark-purple-1000 text-right pr-10\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 13\n    }\n  }, \"Tax\"), getTax()), /*#__PURE__*/React.createElement(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    className: \"pt-1 font-normal text-base text-miru-dark-purple-1000 text-right pr-10\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }\n  }, \"Total\"), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"font-bold text-base text-miru-dark-purple-1000 text-right\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }\n  }, currencyFormat({\n    baseCurrency: currency,\n    amount: total\n  }))), /*#__PURE__*/React.createElement(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    className: \"pt-1 font-normal text-base text-miru-dark-purple-1000 text-right pr-10\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 13\n    }\n  }, \"Amount Paid\"), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"font-bold text-base text-miru-dark-purple-1000 text-right \",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }\n  }, currencyFormat({\n    baseCurrency: currency,\n    amount: amountPaid\n  }))), /*#__PURE__*/React.createElement(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    className: \"pt-1 font-normal text-base text-miru-dark-purple-1000 text-right pr-10\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 13\n    }\n  }, \"Amount Due\"), /*#__PURE__*/React.createElement(\"td\", {\n    className: \"font-bold text-base text-miru-dark-purple-1000 text-right\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 13\n    }\n  }, currencyFormat({\n    baseCurrency: currency,\n    amount: amountDue\n  }))), /*#__PURE__*/React.createElement(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    className: \"pt-2 font-bold text-xs text-miru-han-purple-1000 text-right tracking-widest pr-10\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 13\n    }\n  }, \"REQUEST DEPOSIT\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 13\n    }\n  })))), showDiscountMenu && /*#__PURE__*/React.createElement(DiscountMenu, {\n    setShowDiscount: setShowDiscount,\n    setShowDiscountMenu: setShowDiscountMenu,\n    setAddDiscount: setAddDiscount,\n    setDiscount: setDiscount,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex flex-col\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    onMouseOver: function onMouseOver() {\n      return setShowDiscountButton(true);\n    },\n    onMouseLeave: function onMouseLeave() {\n      return setShowDiscountButton(false);\n    },\n    className: \"w-10\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 9\n    }\n  }, showDiscountButton && /*#__PURE__*/React.createElement(\"button\", {\n    className: \"bg-miru-gray-1000 rounded mt-8 mx-1 p-2\",\n    onClick: function onClick() {\n      return setShowDiscountMenu(!showDiscountMenu);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 34\n    }\n  }, /*#__PURE__*/React.createElement(DotsThreeVertical, {\n    size: 13,\n    color: \"#1D1A31\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    onMouseOver: function onMouseOver() {\n      return setShowEditTaxButton(true);\n    },\n    onMouseLeave: function onMouseLeave() {\n      return setShowEditTaxButton(false);\n    },\n    className: \"w-10 mt-12\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 9\n    }\n  }, showEditTaxButton && /*#__PURE__*/React.createElement(\"button\", {\n    className: \"bg-miru-gray-1000 rounded mt-8 mx-1 p-2\",\n    onClick: function onClick() {\n      setShowTaxInput(true);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(PencilSimple, {\n    size: 13,\n    color: \"#1D1A31\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 13\n    }\n  })))));\n};\n\nexport default InvoiceTotal;","map":{"version":3,"sources":["/Users/mayankkhanna/Documents/miru-web/app/javascript/src/components/Invoices/Edit/InvoiceTotal.tsx"],"names":["React","useState","useEffect","currencyFormat","PencilSimple","DotsThreeVertical","DiscountMenu","InvoiceTotal","currency","newLineItems","invoiceLineItems","invoiceAmount","amountPaid","amountDue","setAmountDue","setAmount","discount","setDiscount","tax","setTax","showDiscountInput","showTax","addDiscount","setAddDiscount","showDiscountMenu","setShowDiscountMenu","showDiscountButton","setShowDiscountButton","showDiscount","setShowDiscount","showTaxInput","setShowTaxInput","showEditTaxButton","setShowEditTaxButton","subTotal","setSubTotal","total","setTotal","onEnter","e","type","key","getDiscount","target","value","getTax","baseCurrency","amount","newLineItemsSubTotal","reduce","sum","lineTotal","invoiceItemSubTotal","quantity","rate","newTotal","Number"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { currencyFormat } from \"helpers/currency\";\nimport { PencilSimple, DotsThreeVertical } from \"phosphor-react\";\n\nimport DiscountMenu from \"../Generate/DiscountMenu\";\n\n// TODO: Make invoice total as common component and move logic to main container\nconst InvoiceTotal = ({\n  currency,\n  newLineItems,\n  invoiceLineItems,\n  invoiceAmount,\n  amountPaid,\n  amountDue, setAmountDue,\n  setAmount,\n  discount, setDiscount,\n  tax, setTax,\n  showDiscountInput, showTax\n}) => {\n\n  const [addDiscount, setAddDiscount] = useState<boolean>(false);\n  const [showDiscountMenu, setShowDiscountMenu] = useState<boolean>(false);\n  const [showDiscountButton, setShowDiscountButton] = useState<boolean>(false);\n  const [showDiscount, setShowDiscount] = useState<boolean>(showDiscountInput);\n  const [showTaxInput, setShowTaxInput] = useState<boolean>(showTax);\n  const [showEditTaxButton, setShowEditTaxButton] = useState<boolean>(false);\n\n  const [subTotal, setSubTotal] = useState<number>(0);\n  const [total, setTotal] = useState<number>(0);\n\n  const onEnter = (e, type) => {\n    if (e.key === \"Enter\") {\n      if (type === \"Discount\") {\n        setAddDiscount(false);\n        setShowDiscount(true);\n      }\n      else {\n        setShowTaxInput(false);\n      }\n    }\n  };\n\n  const getDiscount = () => {\n    if (showDiscount && discount) {\n      return (\n        <td className=\"font-bold text-base text-miru-dark-purple-1000 text-right \">{discount}</td>\n      );\n    }\n    else if (addDiscount) {\n      return (\n        <td className=\"text-right pb-1\">\n          <input\n            type=\"text\"\n            value={discount}\n            className=\"p-1 pr-2 font-medium text-sm text-miru-dark-purple-1000 text-right w-20 rounded focus:outline-none focus:border-miru-gray-1000 focus:ring-1 focus:ring-miru-gray-1000\"\n            onChange={(e) => setDiscount(e.target.value)}\n            onKeyDown={e => onEnter(e, \"Discount\")}\n          />\n        </td>\n      );\n    }\n    else return null;\n  };\n\n  const getTax = () => {\n    if (showTaxInput) {\n      return (\n        <td className=\"pt-4 font-bold text-base text-miru-dark-purple-1000 text-right w-22\">\n          <input\n            type=\"text\"\n            value={tax}\n            className=\"p-1 pr-2 font-medium text-sm text-miru-dark-purple-1000 text-right w-20 rounded focus:outline-none focus:border-miru-gray-1000 focus:ring-1 focus:ring-miru-gray-1000\"\n            onChange={(e) => setTax(e.target.value)}\n            onKeyDown={e => onEnter(e, \"Tax\")}\n          />\n        </td>\n      );\n    }\n\n    return (\n      <td className=\"pt-4 font-bold text-base text-miru-dark-purple-1000 text-right w-22\">\n        {currencyFormat({ baseCurrency: currency, amount: tax })}\n      </td>\n    );\n  };\n\n  useEffect(() => {\n    const newLineItemsSubTotal = newLineItems.reduce((sum, { lineTotal }) => (sum + lineTotal), 0);\n    const invoiceItemSubTotal = invoiceLineItems.reduce((sum, { quantity, rate }) => (sum +((quantity / 60) * rate)), 0);\n\n    const newTotal = Number(newLineItemsSubTotal) + Number(invoiceAmount) + Number(tax) - Number(discount);\n\n    setSubTotal(newLineItemsSubTotal + invoiceItemSubTotal);\n    setTotal(newTotal);\n    setAmount(newTotal);\n    setAmountDue(newTotal - amountPaid);\n  }, [newLineItems, discount, subTotal, tax]);\n\n  return (\n    <div className=\"pt-3 pb-10 mb-5 w-full flex justify-end\">\n      <table className=\"w-1/3\">\n        <tbody>\n          <tr>\n            <td className=\"font-normal text-base text-miru-dark-purple-1000 text-right pr-10\">\n              Sub total\n            </td>\n            <td className=\"font-bold text-base text-miru-dark-purple-1000 text-right \">\n              {subTotal}\n            </td>\n          </tr>\n          <tr\n            onMouseOver={() => setShowDiscountButton(true)}\n            onMouseLeave={() => setShowDiscountButton(false)}\n            className=\"pb-5 border-b-2 miru-gray-400 \">\n            {showDiscount && discount\n              ? <td className=\"py-2 pr-10 font-normal text-base text-miru-dark-purple-1000 text-right pr-10\">\n                Discount\n              </td>\n              : <td className=\"pt-2 pr-10 pb-3 font-bold text-xs text-miru-han-purple-1000 text-right tracking-widest cursor-pointer\" onClick={() => setAddDiscount(true)}>\n                ADD DISCOUNT\n              </td>\n            }\n            {\n              getDiscount()\n            }\n          </tr>\n          <tr\n            onMouseOver={() => setShowEditTaxButton(true)}\n            onMouseLeave={() => setShowEditTaxButton(false)}\n          >\n            <td className=\"pt-4 font-normal text-base text-miru-dark-purple-1000 text-right pr-10\">\n              Tax\n            </td>\n            {\n              getTax()\n            }\n          </tr>\n          <tr>\n            <td className=\"pt-1 font-normal text-base text-miru-dark-purple-1000 text-right pr-10\">\n              Total\n            </td>\n            <td className=\"font-bold text-base text-miru-dark-purple-1000 text-right\">\n              {currencyFormat({ baseCurrency: currency, amount: total })}\n            </td>\n          </tr>\n          <tr>\n            <td className=\"pt-1 font-normal text-base text-miru-dark-purple-1000 text-right pr-10\">\n              Amount Paid\n            </td>\n            <td className=\"font-bold text-base text-miru-dark-purple-1000 text-right \">\n              {currencyFormat({ baseCurrency: currency, amount: amountPaid })}\n            </td>\n          </tr>\n          <tr>\n            <td className=\"pt-1 font-normal text-base text-miru-dark-purple-1000 text-right pr-10\">\n              Amount Due\n            </td>\n            <td className=\"font-bold text-base text-miru-dark-purple-1000 text-right\">\n              {currencyFormat({ baseCurrency: currency, amount: amountDue })}\n            </td>\n          </tr>\n          <tr>\n            <td className=\"pt-2 font-bold text-xs text-miru-han-purple-1000 text-right tracking-widest pr-10\">\n              REQUEST DEPOSIT\n            </td>\n            <td></td>\n          </tr>\n        </tbody>\n      </table>\n      {showDiscountMenu &&\n        <DiscountMenu\n          setShowDiscount={setShowDiscount}\n          setShowDiscountMenu={setShowDiscountMenu}\n          setAddDiscount={setAddDiscount}\n          setDiscount={setDiscount}\n        />\n      }\n      <div className=\"flex flex-col\">\n        <div\n          onMouseOver={() => setShowDiscountButton(true)}\n          onMouseLeave={() => setShowDiscountButton(false)}\n          className=\"w-10\">\n          {showDiscountButton && <button\n            className=\"bg-miru-gray-1000 rounded mt-8 mx-1 p-2\"\n            onClick={() => setShowDiscountMenu(!showDiscountMenu)}\n          >\n            <DotsThreeVertical size={13} color=\"#1D1A31\" />\n          </button>}\n        </div>\n        <div\n          onMouseOver={() => setShowEditTaxButton(true)}\n          onMouseLeave={() => setShowEditTaxButton(false)}\n          className=\"w-10 mt-12\">\n          {showEditTaxButton && <button\n            className=\"bg-miru-gray-1000 rounded mt-8 mx-1 p-2\"\n            onClick={() => {\n              setShowTaxInput(true);\n            }}\n          >\n            <PencilSimple size={13} color=\"#1D1A31\" />\n          </button>}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default InvoiceTotal;\n"]},"metadata":{},"sourceType":"module"}