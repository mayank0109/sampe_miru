{"ast":null,"code":"var _jsxFileName = \"/Users/mayankkhanna/Documents/miru-web/app/javascript/src/components/Clients/Details/index.tsx\",\n    _this = this;\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nvar logger = require(\"js-logger\").get(\"@saeloun/miru-web:javascript:src:components:Clients:Details:index.tsx\");\n\nimport React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { ToastContainer } from \"react-toastify\";\nimport { setAuthHeaders, registerIntercepts } from \"apis/axios\";\nimport clients from \"apis/clients\";\nimport AmountBoxContainer from \"common/AmountBox\";\nimport ChartBar from \"common/ChartBar\";\nimport Table from \"common/Table\";\nimport { cashFormatter } from \"helpers/cashFormater\";\nimport { currencySymbol } from \"helpers/currencySymbol\";\nimport Header from \"./Header\";\nimport { TOASTER_DURATION } from \"../../../constants/index\";\nimport { unmapClientDetails } from \"../../../mapper/client.mapper\";\nimport AddEditProject from \"../../Projects/Modals/AddEditProject\";\nimport DeleteProject from \"../../Projects/Modals/DeleteProject\";\n\nvar getTableData = function getTableData(clients) {\n  if (clients) {\n    return clients.map(function (client) {\n      var hours = (client.minutes / 60).toFixed(2);\n      return {\n        col1: /*#__PURE__*/React.createElement(\"div\", {\n          className: \"text-base text-miru-dark-purple-1000\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 24,\n            columnNumber: 15\n          }\n        }, client.name),\n        col2: /*#__PURE__*/React.createElement(\"div\", {\n          className: \"text-base text-miru-dark-purple-1000\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 25,\n            columnNumber: 15\n          }\n        }, client.team.map(function (member) {\n          return /*#__PURE__*/React.createElement(\"span\", {\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 25,\n              columnNumber: 96\n            }\n          }, member, \",\\xA0\");\n        })),\n        col3: /*#__PURE__*/React.createElement(\"div\", {\n          className: \"text-base text-miru-dark-purple-1000 text-right\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 26,\n            columnNumber: 15\n          }\n        }, hours),\n        rowId: client.id\n      };\n    });\n  }\n\n  return [{}];\n};\n\nvar ClientList = function ClientList(_ref) {\n  var isAdminUser = _ref.isAdminUser;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      showEditDialog = _useState2[0],\n      setShowEditDialog = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      showDeleteDialog = _useState4[0],\n      setShowDeleteDialog = _useState4[1];\n\n  var _useState5 = useState({}),\n      _useState6 = _slicedToArray(_useState5, 2),\n      selectedProject = _useState6[0],\n      setSelectedProject = _useState6[1];\n\n  var _useState7 = useState(),\n      _useState8 = _slicedToArray(_useState7, 2),\n      projectDetails = _useState8[0],\n      setProjectDetails = _useState8[1];\n\n  var _useState9 = useState(null),\n      _useState10 = _slicedToArray(_useState9, 2),\n      totalMinutes = _useState10[0],\n      setTotalMinutes = _useState10[1];\n\n  var _useState11 = useState({}),\n      _useState12 = _slicedToArray(_useState11, 2),\n      clientDetails = _useState12[0],\n      setClientDetails = _useState12[1];\n\n  var _React$useState = React.useState(null),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      editProjectData = _React$useState2[0],\n      setEditProjectData = _React$useState2[1];\n\n  var _useState13 = useState(null),\n      _useState14 = _slicedToArray(_useState13, 2),\n      overdueOutstandingAmount = _useState14[0],\n      setOverDueOutstandingAmt = _useState14[1];\n\n  var params = useParams();\n\n  var handleEditClick = function handleEditClick(id) {\n    setShowEditDialog(true);\n    var editSelection = projectDetails.find(function (project) {\n      return project.id === id;\n    });\n    setSelectedProject(editSelection);\n  };\n\n  var handleDeleteClick = function handleDeleteClick(id) {\n    setShowDeleteDialog(true);\n    var editSelection = projectDetails.find(function (project) {\n      return project.id === id;\n    });\n    setSelectedProject(editSelection);\n  };\n\n  var handleSelectChange = function handleSelectChange(event) {\n    clients.show(params.clientId, \"?time_frame=\".concat(event.target.value)).then(function (res) {\n      var sanitized = unmapClientDetails(res);\n      setProjectDetails(sanitized.projectDetails);\n      setClientDetails(sanitized.clientDetails);\n      setTotalMinutes(sanitized.totalMinutes);\n      setOverDueOutstandingAmt(sanitized.overdueOutstandingAmount);\n    });\n  };\n\n  useEffect(function () {\n    setAuthHeaders();\n    registerIntercepts();\n    clients.show(params.clientId, \"?time_frame=week\").then(function (res) {\n      var sanitized = unmapClientDetails(res);\n      setClientDetails(sanitized.clientDetails);\n      setProjectDetails(sanitized.projectDetails);\n      setTotalMinutes(sanitized.totalMinutes);\n      setOverDueOutstandingAmt(sanitized.overdueOutstandingAmount);\n    });\n  }, []);\n  var tableHeader = [{\n    Header: \"PROJECT\",\n    accessor: \"col1\",\n    // accessor is the \"key\" in the data\n    cssClass: \"\"\n  }, {\n    Header: \"TEAM\",\n    accessor: \"col2\",\n    cssClass: \"\"\n  }, {\n    Header: \"HOURS LOGGED\",\n    accessor: \"col3\",\n    cssClass: \"text-right\" // accessor is the \"key\" in the data\n\n  }];\n  var currencySymb = currencySymbol(overdueOutstandingAmount === null || overdueOutstandingAmount === void 0 ? void 0 : overdueOutstandingAmount.currency);\n  var amountBox = [{\n    title: \"OVERDUE\",\n    amount: currencySymb + cashFormatter(overdueOutstandingAmount === null || overdueOutstandingAmount === void 0 ? void 0 : overdueOutstandingAmount.overdue_amount)\n  }, {\n    title: \"OUTSTANDING\",\n    amount: currencySymb + cashFormatter(overdueOutstandingAmount === null || overdueOutstandingAmount === void 0 ? void 0 : overdueOutstandingAmount.outstanding_amount)\n  }];\n  var tableData = getTableData(projectDetails);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ToastContainer, {\n    autoClose: TOASTER_DURATION,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Header, {\n    clientDetails: clientDetails,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }\n  }, isAdminUser && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bg-miru-gray-100 py-10 px-10\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 26\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex justify-end\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    onChange: handleSelectChange,\n    className: \"px-3 py-1.5 text-base font-normal bg-transparent bg-clip-padding bg-no-repeat border-none transition ease-in-out m-0 focus:outline-none text-miru-han-purple-1000\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    className: \"text-miru-dark-purple-600\",\n    value: \"week\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 15\n    }\n  }, \"THIS WEEK\"), /*#__PURE__*/React.createElement(\"option\", {\n    className: \"text-miru-dark-purple-600\",\n    value: \"month\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 15\n    }\n  }, \"This MONTH\"), /*#__PURE__*/React.createElement(\"option\", {\n    className: \"text-miru-dark-purple-600\",\n    value: \"year\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 15\n    }\n  }, \"THIS YEAR\"))), projectDetails && /*#__PURE__*/React.createElement(ChartBar, {\n    data: projectDetails,\n    totalMinutes: totalMinutes,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 30\n    }\n  }), /*#__PURE__*/React.createElement(AmountBoxContainer, {\n    amountBox: amountBox,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex flex-col\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"overflow-hidden\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 15\n    }\n  }, projectDetails && /*#__PURE__*/React.createElement(Table, {\n    handleEditClick: handleEditClick,\n    handleDeleteClick: handleDeleteClick,\n    hasRowIcons: true,\n    tableHeader: tableHeader,\n    tableRowArray: tableData,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 37\n    }\n  })))))), showEditDialog && /*#__PURE__*/React.createElement(AddEditProject, {\n    setShowProjectModal: setShowEditDialog,\n    setEditProjectData: setEditProjectData,\n    editProjectData: editProjectData,\n    projectData: selectedProject,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 9\n    }\n  }), showDeleteDialog && /*#__PURE__*/React.createElement(DeleteProject, {\n    setShowDeleteDialog: setShowDeleteDialog,\n    project: selectedProject,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 9\n    }\n  }));\n};\n\nexport default ClientList;","map":{"version":3,"sources":["/Users/mayankkhanna/Documents/miru-web/app/javascript/src/components/Clients/Details/index.tsx"],"names":["React","useEffect","useState","useParams","ToastContainer","setAuthHeaders","registerIntercepts","clients","AmountBoxContainer","ChartBar","Table","cashFormatter","currencySymbol","Header","TOASTER_DURATION","unmapClientDetails","AddEditProject","DeleteProject","getTableData","map","client","hours","minutes","toFixed","col1","name","col2","team","member","col3","rowId","id","ClientList","isAdminUser","showEditDialog","setShowEditDialog","showDeleteDialog","setShowDeleteDialog","selectedProject","setSelectedProject","projectDetails","setProjectDetails","totalMinutes","setTotalMinutes","clientDetails","setClientDetails","editProjectData","setEditProjectData","overdueOutstandingAmount","setOverDueOutstandingAmt","params","handleEditClick","editSelection","find","project","handleDeleteClick","handleSelectChange","event","show","clientId","target","value","then","res","sanitized","tableHeader","accessor","cssClass","currencySymb","currency","amountBox","title","amount","overdue_amount","outstanding_amount","tableData"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { ToastContainer } from \"react-toastify\";\nimport { setAuthHeaders, registerIntercepts } from \"apis/axios\";\nimport clients from \"apis/clients\";\n\nimport AmountBoxContainer from \"common/AmountBox\";\nimport ChartBar from \"common/ChartBar\";\nimport Table from \"common/Table\";\nimport { cashFormatter } from \"helpers/cashFormater\";\nimport { currencySymbol } from \"helpers/currencySymbol\";\n\nimport Header from \"./Header\";\nimport { TOASTER_DURATION } from \"../../../constants/index\";\nimport { unmapClientDetails } from \"../../../mapper/client.mapper\";\nimport AddEditProject from \"../../Projects/Modals/AddEditProject\";\nimport DeleteProject from \"../../Projects/Modals/DeleteProject\";\n\nconst getTableData = (clients) => {\n  if (clients) {\n    return clients.map((client) => {\n      const hours = (client.minutes/60).toFixed(2);\n      return {\n        col1: <div className=\"text-base text-miru-dark-purple-1000\">{client.name}</div>,\n        col2: <div className=\"text-base text-miru-dark-purple-1000\">{client.team.map(member => <span>{member},&nbsp;</span>)}</div>,\n        col3: <div className=\"text-base text-miru-dark-purple-1000 text-right\">{hours}</div>,\n        rowId: client.id\n      };\n    });\n  }\n  return [{}];\n};\n\nconst ClientList = ({ isAdminUser }) => {\n  const [showEditDialog, setShowEditDialog] = useState<boolean>(false);\n  const [showDeleteDialog, setShowDeleteDialog] = useState<boolean>(false);\n  const [selectedProject, setSelectedProject] = useState({});\n  const [projectDetails, setProjectDetails] = useState<any>();\n  const [totalMinutes, setTotalMinutes] = useState(null);\n  const [clientDetails, setClientDetails] = useState<any>({});\n  const [editProjectData, setEditProjectData] = React.useState<any>(null);\n  const [overdueOutstandingAmount, setOverDueOutstandingAmt]= useState<any>(null);\n\n  const params = useParams();\n\n  const handleEditClick = (id) => {\n    setShowEditDialog(true);\n    const editSelection = projectDetails.find(project => project.id === id);\n    setSelectedProject(editSelection);\n  };\n\n  const handleDeleteClick = (id) => {\n    setShowDeleteDialog(true);\n    const editSelection = projectDetails.find(project => project.id === id);\n    setSelectedProject(editSelection);\n  };\n\n  const handleSelectChange = (event) => {\n    clients.show(params.clientId,`?time_frame=${event.target.value}`)\n      .then((res) => {\n        const sanitized = unmapClientDetails(res);\n        setProjectDetails(sanitized.projectDetails);\n        setClientDetails(sanitized.clientDetails);\n        setTotalMinutes(sanitized.totalMinutes);\n        setOverDueOutstandingAmt(sanitized.overdueOutstandingAmount);\n      });\n  };\n\n  useEffect(() => {\n    setAuthHeaders();\n    registerIntercepts();\n    clients.show(params.clientId, \"?time_frame=week\")\n      .then((res) => {\n        const sanitized = unmapClientDetails(res);\n        setClientDetails(sanitized.clientDetails);\n        setProjectDetails(sanitized.projectDetails);\n        setTotalMinutes(sanitized.totalMinutes);\n        setOverDueOutstandingAmt(sanitized.overdueOutstandingAmount);\n      });\n  }, []);\n\n  const tableHeader = [\n    {\n      Header: \"PROJECT\",\n      accessor: \"col1\", // accessor is the \"key\" in the data\n      cssClass: \"\"\n    },\n    {\n      Header: \"TEAM\",\n      accessor: \"col2\",\n      cssClass: \"\"\n    },\n    {\n      Header: \"HOURS LOGGED\",\n      accessor: \"col3\",\n      cssClass: \"text-right\" // accessor is the \"key\" in the data\n    }\n  ];\n\n  const currencySymb = currencySymbol(overdueOutstandingAmount?.currency);\n\n  const amountBox = [{\n    title: \"OVERDUE\",\n    amount: currencySymb + cashFormatter(overdueOutstandingAmount?.overdue_amount)\n  },\n  {\n    title: \"OUTSTANDING\",\n    amount: currencySymb + cashFormatter(overdueOutstandingAmount?.outstanding_amount)\n  }];\n\n  const tableData = getTableData(projectDetails);\n\n  return (\n    <>\n      <ToastContainer autoClose={TOASTER_DURATION} />\n      <Header clientDetails={clientDetails} />\n      <div>\n        { isAdminUser && <div className=\"bg-miru-gray-100 py-10 px-10\">\n          <div className=\"flex justify-end\">\n            <select onChange={handleSelectChange} className=\"px-3\n                py-1.5\n                text-base\n                font-normal\n                bg-transparent bg-clip-padding bg-no-repeat\n                border-none\n                transition\n                ease-in-out\n                m-0\n                focus:outline-none\n                text-miru-han-purple-1000\">\n              <option className=\"text-miru-dark-purple-600\" value=\"week\">\n                    THIS WEEK\n              </option>\n              <option className=\"text-miru-dark-purple-600\" value=\"month\">\n                    This MONTH\n              </option>\n              <option className=\"text-miru-dark-purple-600\" value=\"year\">\n                    THIS YEAR\n              </option>\n            </select>\n          </div>\n          {projectDetails && <ChartBar data={projectDetails} totalMinutes={totalMinutes} />}\n          <AmountBoxContainer amountBox = {amountBox} />\n        </div>\n        }\n        <div className=\"flex flex-col\">\n          <div className=\"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8\">\n            <div className=\"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8\">\n              <div className=\"overflow-hidden\">\n                { projectDetails && <Table\n                  handleEditClick={handleEditClick}\n                  handleDeleteClick={handleDeleteClick}\n                  hasRowIcons={true}\n                  tableHeader={tableHeader}\n                  tableRowArray={tableData}\n                /> }\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      {showEditDialog &&\n        <AddEditProject\n          setShowProjectModal={setShowEditDialog}\n          setEditProjectData={setEditProjectData}\n          editProjectData={editProjectData}\n          projectData={selectedProject}\n        />\n      }\n      {showDeleteDialog && (\n        <DeleteProject\n          setShowDeleteDialog={setShowDeleteDialog}\n          project={selectedProject}\n        />\n      )}\n    </>\n  );\n};\n\nexport default ClientList;\n"]},"metadata":{},"sourceType":"module"}